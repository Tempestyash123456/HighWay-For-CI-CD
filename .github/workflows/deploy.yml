# ======================================================================
# üì¶ GitHub Actions Workflow: CI/CD for Static Website to Netlify
# This workflow triggers on push to main, and deploys the 'dist' folder.
# ======================================================================

name: Deploy to Netlify

# üßØ Trigger this workflow when changes are pushed to the 'main' branch
on:
  push:
    branches:
      - main

jobs:
  deploy:
    # üñ•Ô∏è Runs the job on the latest Ubuntu runner provided by GitHub
    runs-on: ubuntu-latest

    steps:
      # -------------------------------------------
      # üì• Step 1: Checkout the repository contents
      # -------------------------------------------
      - name: Checkout Code
        uses: actions/checkout@v4

      # ---------------------------------------------------------------------
      # üöÄ Step 2: Deploy to Netlify using a community-maintained GitHub Action
      # - Requires 'NETLIFY_AUTH_TOKEN' and 'NETLIFY_SITE_ID' secrets.
      # - It deploys the contents of the ./dist folder to the production site.
      # ---------------------------------------------------------------------
      - name: Deploy to Netlify
        uses: South-Paw/action-netlify-deploy@v1.2.0
        with:
          deploy-dir: ./                         # Directory with static site content
          netlify-auth-token: ${{ secrets.NETLIFY_AUTH_TOKEN }} # Auth token from Netlify
          netlify-site-id: ${{ secrets.NETLIFY_SITE_ID }}       # Site ID from Netlify
          production-deploy: true                    # Deploy to production environment
          publish-branch: main                       # Branch to deploy from